<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Registro</title>
</head>
<body>

<h3>Formulario de Pedido</h3>
<form id="pedido-form">
    <input type="text" id="nombre" placeholder="Nombre" required><br><br>
    <input type="email" id="correo" placeholder="Correo" required><br><br>
    <input type="text" id="telefono" placeholder="Teléfono" required><br><br>
    <textarea id="mensaje" placeholder="Mensaje" required></textarea><br><br>
    <button type="submit">Enviar Pedido</button>
</form>

<script>
// Función para capturar los datos del formulario y enviarlos al servidor
document.getElementById("pedido-form").addEventListener("submit", function(event) {
    event.preventDefault(); // Prevenir el envío normal del formulario

    // Obtener los valores del formulario
    const nombre = document.getElementById("nombre").value;
    const correo = document.getElementById("correo").value;
    const telefono = document.getElementById("telefono").value;
    const mensaje = document.getElementById("mensaje").value;

    // Crear un objeto con los datos
    const pedido = {
        nombre: nombre,
        correo: correo,
        telefono: telefono,
        mensaje: mensaje
    };

    // Enviar los datos al servidor usando Fetch API
    fetch("services/guardar_pedido.php", {
    method: "POST",
    headers: {
        "Content-Type": "application/json"
    },
    body: JSON.stringify(pedido)
})

    .then(response => response.json())
    .then(data => {
        alert("Pedido guardado con éxito");
        document.getElementById("pedido-form").reset(); // Limpiar el formulario
    })
    .catch(error => {
        console.error("Error al guardar el pedido:", error);
        alert("Hubo un error al guardar el pedido");
    });
});
</script>

</body>
</html>
